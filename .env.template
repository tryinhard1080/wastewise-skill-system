# WasteWise Environment Variables Template
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# ===========================
# SUPABASE CONFIGURATION
# ===========================
# Get these from: https://supabase.com/dashboard/project/_/settings/api

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Supabase Storage Bucket for project files (default: project-files)
# Must match the bucket name in your Supabase Storage configuration
NEXT_PUBLIC_SUPABASE_STORAGE_BUCKET=project-files

# ===========================
# AI SERVICES (ANTHROPIC)
# ===========================
# Get API key from: https://console.anthropic.com/settings/keys

ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# ===========================
# SEARCH API (AT LEAST ONE REQUIRED)
# ===========================
# The system will automatically fallback between providers if one fails.
# Priority order: Exa (primary) → Tavily → Brave
# For best results, configure at least 2 providers for redundancy.

# Option 1: Exa (RECOMMENDED - Primary provider for semantic/ordinance search)
# Get API key from: https://exa.ai
EXA_API_KEY=your-exa-key-here

# Option 2: Tavily (Fallback - AI-native general search)
# Get API key from: https://tavily.com
# TAVILY_API_KEY=your-tavily-key-here

# Option 3: Brave Search (Fallback - General web search)
# Get API key from: https://brave.com/search/api
# BRAVE_API_KEY=your-brave-key-here

# ===========================
# APPLICATION CONFIGURATION
# ===========================

NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development

# ===========================
# SECURITY - RATE LIMITING
# ===========================
# Production-grade distributed rate limiting using Upstash Redis
# Get credentials from: https://console.upstash.com/redis
# Free tier: 10,000 requests/day

# IMPORTANT: Required for production deployment
# Without these, rate limiting falls back to in-memory (single instance only)
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# ===========================
# ALERTS & NOTIFICATIONS
# ===========================

# Email notifications via Resend
# Get API key from: https://resend.com/api-keys
# RESEND_API_KEY=re_your_api_key_here
# EMAIL_FROM=alerts@wastewise.app
# ADMIN_EMAIL=admin@your-company.com

# Slack webhook for critical alerts (optional)
# Create webhook at: https://api.slack.com/messaging/webhooks
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# PagerDuty integration for critical alerts (optional)
# Get integration key from: https://your-org.pagerduty.com/service-directory
# PAGERDUTY_KEY=your_pagerduty_integration_key

# ===========================
# JOB MANAGEMENT CONFIGURATION
# ===========================

# Maximum retry attempts for failed jobs
MAX_JOB_RETRIES=3

# Alert threshold for stuck jobs (in minutes)
JOB_STUCK_THRESHOLD_MINUTES=30

# Alert threshold for high error rate (0.10 = 10%)
ERROR_RATE_THRESHOLD=0.10

# Worker heartbeat threshold (in minutes)
WORKER_HEARTBEAT_THRESHOLD_MINUTES=5

# ===========================
# MONITORING & ERROR TRACKING
# ===========================

# Sentry Error Tracking (production monitoring)
# Get DSN from: https://sentry.io/settings/[org]/projects/[project]/keys/
# NEXT_PUBLIC_SENTRY_DSN=https://your-public-key@sentry.io/your-project-id
# SENTRY_DSN=https://your-public-key@sentry.io/your-project-id

# Sentry Organization & Project (for source map uploads)
# SENTRY_ORG=your-organization-slug
# SENTRY_PROJECT=your-project-slug

# Sentry Auth Token (for CI/CD source map uploads)
# Generate at: https://sentry.io/settings/account/api/auth-tokens/
# SENTRY_AUTH_TOKEN=your-auth-token

# Vercel Analytics (when deployed)
# NEXT_PUBLIC_VERCEL_ANALYTICS_ID=

# ===========================
# DEVELOPMENT SETTINGS
# ===========================

# Enable debug logging for development
DEBUG=true

# Logging level (debug, info, warn, error)
LOG_LEVEL=info

# Mock AI responses (for testing without API costs)
MOCK_AI_RESPONSES=false

# Maximum upload file size (in MB)
MAX_UPLOAD_SIZE_MB=10

# ===========================
# CALCULATION VALIDATION
# ===========================

# Run evals on every calculation (recommended for development)
RUN_EVALS_ON_CALCULATION=true

# Tolerance for calculation evals (percentage)
EVAL_TOLERANCE_PERCENT=0.01

# ===========================
# SKILLS CONFIGURATION
# ===========================

# Enable/disable specific skills (comma-separated)
# ENABLED_SKILLS=wastewise-analytics,compactor-optimization,contract-extractor,regulatory-research,batch-extractor

# Skill execution timeout (milliseconds)
SKILL_TIMEOUT_MS=300000

# ===========================
# NOTES
# ===========================

# 1. After copying to .env.local, add to .gitignore (already done)
# 2. For production, set these in Vercel environment variables
# 3. Never share API keys publicly or commit them to git
# 4. Rotate keys immediately if accidentally exposed
# 5. For local Supabase: Run `supabase start` to get local credentials
